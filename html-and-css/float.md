# CSS之浮动

浮动引入之初，或许单纯地只是想做文字和图片排版，但是前端工程师们发现所有的元素都可以浮动后，出现了很多利用浮动实现的效果，如布局、首字下沉。

本文以MDN的标题为引，逐步深入学习浮动。

[源码](https://github.com/songchengen/html-css/blob/master/float/index.html)

## 文字环绕

我对于浮动的认识来自于Word文档，对图片设置浮动实现文字的环绕效果。下边我们简单实现以下。

```html
<h1>张爱玲</h1>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Zhang_Ailing_1954.jpg/220px-Zhang_Ailing_1954.jpg" alt="张爱玲">
<p>张爱玲（1920年9月30日－1995年9月8日），小说家。祖籍河北丰润，生于中华民国上海公共租界。本名张煐，后因入学需要，母亲黄逸梵（又名黄素琼）以英文名Eileen译音，易名爱玲。</p>
<p>张爱玲的祖父母分别为清朝末年著名大臣张佩纶和李鸿章的长女李菊藕。父亲张志沂，生母黄逸梵是清末长江七省水师提督黄翼升之孙女，即前桂平梧郁道黄宗炎的女儿，继母孙用蕃是北洋政府国务总理孙宝琦的女儿。张爱玲出生名门，受到了极好的教育，特别是当代处于中西合并价值观的形成。上海沦陷时期，陆续发表《沉香屑‧第一炉香》、《倾城之恋》、《心经》、《金锁记》等中、短篇小说，震动上海文坛。1952年张爱玲以完成未完成的学业为名离开中国大陆，其后赴美。在美国期间翻译了清代吴语小说《海上花列传》（韩邦庆所著），又写了文学评论《红楼梦魇》。张爱玲一生见证了中国近现代史，漂泊于上海、香港、天津、美国各地，最后在美国定居，并于1960年取得美国国籍。早在之前，1956年时，张爱玲就已经和大自己36岁的德裔美国人赖雅结婚，赖雅逝世后，张爱玲在美国终老，1995年9月8日，因为动脉硬化心血管病去世于美国加州洛杉矶市西木区罗彻斯特大道的公寓，享寿74岁。</p>
<p>张爱玲一生游走中国各地，自谓“我的上海话本来是半途出家，不是从小会的。我的母语，是被北边话与安徽话的影响冲淡了的南京话”。</p>
<p class="to-wiki"><a href="https://zh.wikipedia.org/wiki/%E5%BC%B5%E6%84%9B%E7%8E%B2">原文链接</a></p>
```

以上HTML标签，因为都是block标签，在不做任何处理的情况下，所有的标签默认左对齐。显然达不到我们的要求，现在我们给图片加上左浮动。

```css
img {
    float: left;
}
```

给图片加上左浮动，图片从正常的文档流中脱离出来，`吸附`在父容器的左边，浮动元素之下的元素，环绕浮动元素的右侧排列。

![文字环绕效果图](./../image/text-wrap.png)

有的时候我们并不需要浮动元素之后的所有元素都乖乖地排列在浮动元素右侧，这时候我们需要清除浮动效果。

**切记给需要清除浮动的元素设置`clear`**，如a标签。

```css
.to-wiki {
    clear: both;
}
```

## 首字下沉

段落首字下沉的特效利用浮动来实现再好不过了。实现起来也十分简单。

```html
<p>当天他们送她出去，流苏站在门槛上，柳原立在她身后，把手掌合在她的手掌上，笑道：“我说，我们几时结婚呢？”流苏听了，一句话也没有，只低下了头，落下泪来。柳原拉住她的手道：“来来，我们今天就到报馆里去登报启事，不过你也许愿意候些时，等我们回到上海，大张旗鼓的排场一下，请请亲戚们。”流苏道：“呸！他们也配！”说着，嗤的笑了出来，往后顺势一倒，靠在他身上。柳原伸手到前面去羞她的脸道：“又是哭，又是笑！”</p>
```

```css
p::first-letter {
    font-size: 2em;
    float: left;
    padding: 2px;
    margin-right: 4px;
    color: chocolate;
}
```

有了文字环绕的经验，理解这段首字下沉的代码就会很简单了。

![首字下沉效果图](./../image/sinking-down.png)

## 布局

首先是简单的两列布局，以`div`为例，将并列的两个元素分别左右浮动，让他们`吸附`在父容器的左右两边，同时给他们正确的宽度。

```html
<div>有一天，他们在街上买菜，碰着萨黑荑妮公主。萨黑荑妮黄着脸，把蓬松的辫子胡乱编了个麻花髻，身上不知从哪里借来一件青布棉袍穿着，脚下却依旧趿着印度式七宝嵌花纹皮拖鞋。她同他们热烈地握手，问他们现在住在哪里，急欲看看他们的新屋子。又注意到流苏的篮子里有去了壳的小蚝，愿意跟流苏学习烧制清蒸蚝汤。柳原顺口邀了她来吃便饭，她很高兴跟了他们一同回去。她的英国人进了集中营，她现在住在一个熟识的，常常为她当点小差的印度巡捕家里。她有许久没有吃饱过。她唤流苏“白小姐”。柳原笑道：“这是我太太。你该向我道喜呢！”萨黑荑妮道：“真的么？你们几时结婚的？”柳原耸耸肩道：“就在中国报上登了个启事，你知道，战争期间的婚姻，总是潦草的……”流苏没听懂他们的话。萨黑荑妮吻了他又吻了她。然而他们的饭菜毕竟是很寒苦，而且柳原声明他们也难得吃一次蚝汤。萨黑荑妮从此没有再上门过。</div>
<div>当天他们送她出去，流苏站在门槛上，柳原立在她身后，把手掌合在她的手掌上，笑道：“我说，我们几时结婚呢？”流苏听了，一句话也没有，只低下了头，落下泪来。柳原拉住她的手道：“来来，我们今天就到报馆里去登报启事，不过你也许愿意候些时，等我们回到上海，大张旗鼓的排场一下，请请亲戚们。”流苏道：“呸！他们也配！”说着，嗤的笑了出来，往后顺势一倒，靠在他身上。柳原伸手到前面去羞她的脸道：“又是哭，又是笑！”</div>
<pre>节选自《倾城之恋》</pre>
```

```css
div {
    width: 48%;
}

div:nth-of-type(1) {
    float: left;
}

div:nth-of-type(2) {
    float: right;
}

pre {
    clear: both;
}
```

![两列浮动布局效果图](./../image/two-column-layout.png)


对于三列布局实现效果也是一样的，这里就不实际演示了，只给出实例代码和说明。

```html
<div class="first-column"></div>
<div class="second-column"></div>
<div class="third-column"></div>
<footer></footer>

```

```css
.first-column {
    float: left;
    width: 30%;
}

.second-column {
    float: left;
    width: 30%;
    margin-left: 5%;
}

.third-column {
    float: right;
    width: 30%;
}

footer {
    clear: both;
}

```

需要注意的是，我们给第二个块设置的是左浮动，使得第三块能排列在第二列的右边。如果设置的是有浮动，又是另外一种情况了。

最后我们给`footer`加上清除浮动的属性，让他能够正常地排列在内容的底部。

## 小结

不难看出，浮动地实现其实非常简单，但同时也具有很强的破坏性，不仅破坏了正常的文档流，也使得宽度难以计算，同时清除浮动也是一项复杂的工程。因此，我们可以利用浮动来处理一些合适的事，比如文字环绕这类符合浮动本职的工作，通过其他方式处理布局我觉得更加合适。

## 参考

[MDN-CSS排版概述-浮动](https://developer.mozilla.org/zh-CN/docs/Learn/CSS/CSS_layout/Floats)
